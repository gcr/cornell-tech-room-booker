// Generated by LiveScript 1.4.0
(function(){
  var CORNELL_TECH_RED, BACKGROUND_LOADING, out$ = typeof exports != 'undefined' && exports || this;
  out$.CORNELL_TECH_RED = CORNELL_TECH_RED = "#b31b1b";
  out$.BACKGROUND_LOADING = BACKGROUND_LOADING = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAIUlEQVQYV2PcLC393/fpU0YGNIAhAJMnTgLZWOJ0INsPADIQCAdlTP30AAAAAElFTkSuQmCC";
  out$.BACKGROUND_LOADING = BACKGROUND_LOADING = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAKElEQVQYV2NkQAObpaX/MyKLgQR8nz5lhAvCBECKwILIAmBBdAGQIABEwxHu9sr/MwAAAABJRU5ErkJggg==";
  Vue.component('active-floorplan', {
    template: '<floorplan :roomStatus="roomStatus" :floorid="floorid"></floorplan>',
    props: ['rooms', 'floorid'],
    data: function(){
      return {
        store: window.availabilityStore
      };
    },
    methods: {
      computeActivity: function(room){
        var i$, ref$, len$, evt;
        if (room.loaded) {
          for (i$ = 0, len$ = (ref$ = room.events).length; i$ < len$; ++i$) {
            evt = ref$[i$];
            if (this.store.eventSelected(evt)) {
              return "red";
            }
          }
          return "green-outline";
        } else {
          return "red-hatch";
        }
      }
    },
    computed: {
      roomStatus: function(){
        var roomStatus, i$, ref$, len$, room;
        roomStatus = {};
        for (i$ = 0, len$ = (ref$ = this.rooms).length; i$ < len$; ++i$) {
          room = ref$[i$];
          roomStatus[room] = this.computeActivity(this.store.loadAvailability(room));
        }
        return roomStatus;
      }
    }
  });
  Vue.component('floor-list', {
    template: '<ul>\n  <li v-for="floor in floorlist">\n    <h2>\n      <a href="#"@click="selectFloor(floor)">(Select)</a>\n      {{floor.name}}\n    </h2>\n  </li>\n</ul>',
    data: function(){
      return {
        floorlist: FLOOR_LIST,
        currentFloor: null,
        store: availabilityStore
      };
    },
    methods: {
      selectFloor: function(floor){
        var allRoomIds, res$, i$, ref$, len$, r;
        this.currentFloor = floor.name;
        res$ = [];
        for (i$ = 0, len$ = (ref$ = floor.rooms).length; i$ < len$; ++i$) {
          r = ref$[i$];
          res$.push(r.id);
        }
        allRoomIds = res$;
        this.store.setAttentionFloor(floor.name);
        return this.store.setAttentionRooms(allRoomIds);
      }
    }
  });
  Vue.component('room-list', {
    template: '<ul>\n  <li v-for="roomid in attentionRooms">\n    {{roomName[roomid]}} ({{status[roomid]}})\n  </li>\n</ul>',
    data: function(){
      return {
        attentionRooms: availabilityStore.attentionRooms,
        roomName: ROOMID_TO_NAME,
        status: availabilityStore.attentionRoomStatus
      };
    }
  });
  Vue.component('app', {
    template: '<div>\n  <floor-list></floor-list>\n  <room-list></room-list>\n  <floorplan></floorplan>\n</div>'
  });
  $(function(){
    return this.app = new Vue({
      el: '#myapp'
    });
  });
}).call(this);
