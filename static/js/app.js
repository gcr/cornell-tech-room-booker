// Generated by LiveScript 1.4.0
(function(){
  var CORNELL_TECH_RED, BACKGROUND_LOADING, out$ = typeof exports != 'undefined' && exports || this;
  out$.CORNELL_TECH_RED = CORNELL_TECH_RED = "#b31b1b";
  out$.BACKGROUND_LOADING = BACKGROUND_LOADING = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAIUlEQVQYV2PcLC393/fpU0YGNIAhAJMnTgLZWOJ0INsPADIQCAdlTP30AAAAAElFTkSuQmCC";
  out$.BACKGROUND_LOADING = BACKGROUND_LOADING = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAKElEQVQYV2NkQAObpaX/MyKLgQR8nz5lhAvCBECKwILIAmBBdAGQIABEwxHu9sr/MwAAAABJRU5ErkJggg==";
  Vue.component('floor-list', {
    template: '<ul class="floor-list">\n  <li v-for="floor in floorlist">\n    <button :class="{floor: true, active: isActive(floor)}" @click="selectFloor(floor)">\n      {{floor.name}}\n      &nbsp;\n      <i v-if="isActive(floor)" class="fa fa-check"></i>\n    </button>\n  </li>\n</ul>',
    data: function(){
      return {
        floorlist: FLOOR_LIST,
        currentFloor: null,
        store: availabilityStore
      };
    },
    methods: {
      isActive: function(floor){
        return this.currentFloor === floor.name;
      },
      selectFloor: function(floor){
        var allRoomIds, res$, i$, ref$, len$, r;
        this.currentFloor = floor.name;
        res$ = [];
        for (i$ = 0, len$ = (ref$ = floor.rooms).length; i$ < len$; ++i$) {
          r = ref$[i$];
          res$.push(r.id);
        }
        allRoomIds = res$;
        this.store.setAttentionFloor(floor.name);
        return this.store.setAttentionRooms(allRoomIds);
      }
    }
  });
  Vue.component('room-list', {
    template: '<div class="room-list">\n  <div class="app-header">\n    <h1 class="wide">{{description}}</h1>\n  </div>\n  <ul>\n    <li :class="classfor(roomid)" v-for="roomid in attentionRooms">\n      <a href="#" @click="click(roomid)">\n        {{roomName[roomid]}}\n        &nbsp;\n        <i v-if="isSelected(roomid)" class="fa fa-check"></i>\n      </a>\n    </li>\n    <span v-if="attentionRooms.length == 0">\n      No rooms to show. Select a location at the top left.\n    </span>\n  </ul>\n</div>',
    data: function(){
      return {
        attentionRooms: availabilityStore.attentionRooms,
        roomName: ROOMID_TO_NAME,
        status: availabilityStore.attentionRoomStatus
      };
    },
    methods: {
      click: function(roomid){
        return availabilityStore.selectRoom(roomid);
      },
      isSelected: function(roomid){
        return availabilityStore.selectedRoom === roomid;
      },
      classfor: function(roomid){
        return this.status[roomid] + (this.isSelected(roomid) ? " selected" : "");
      }
    },
    computed: {
      description: function(){
        var nAvailable, r, nLoading;
        nAvailable = (function(){
          var i$, ref$, len$, results$ = [];
          for (i$ = 0, len$ = (ref$ = this.attentionRooms).length; i$ < len$; ++i$) {
            r = ref$[i$];
            if (this.status[r] === "Available") {
              results$.push(r);
            }
          }
          return results$;
        }.call(this)).length;
        nLoading = (function(){
          var i$, ref$, len$, results$ = [];
          for (i$ = 0, len$ = (ref$ = this.attentionRooms).length; i$ < len$; ++i$) {
            r = ref$[i$];
            if (this.status[r] === "Loading") {
              results$.push(r);
            }
          }
          return results$;
        }.call(this)).length;
        if (this.attentionRooms.length < 2) {
          return "Room list";
        } else if (nLoading > 0 && nAvailable === 0) {
          return "Room list";
        } else if (nAvailable === 0) {
          return "No rooms free";
        } else {
          return nAvailable + " rooms free";
        }
      }
    }
  });
  Vue.component('date-scrubber', {
    template: '<div class="date-scrubber app-header">\n  <h1>\n  {{date}}\n  <button class="btn" @click="backward">\n    <i class="fa fa-chevron-left"></i>\n  </button>\n  <button class="btn" @click="forward">\n    <i class="fa fa-chevron-right"></i>\n  </button>\n  </h1>\n</div>',
    data: function(){
      return {
        store: window.availabilityStore
      };
    },
    computed: {
      date: function(){
        return this.store.attentionDay.format('ddd, MMM D');
      }
    },
    methods: {
      forward: function(){
        return this.store.bumpAttentionDay(1);
      },
      backward: function(){
        return this.store.bumpAttentionDay(-1);
      }
    }
  });
  Vue.component('app', {
    template: '<div class="app">\n  <div class="app-pane">\n    <date-scrubber></date-scrubber>\n    <floor-list></floor-list>\n    <room-list></room-list>\n  </div>\n  <div class="map app-pane">\n    <div class="app-header">\n      <h1 class="wide">Map</h1>\n    </div>\n    <floorplan></floorplan>\n  </div>\n  <div class="calendar" style="flex: 1 0 35em;">\n    <calendar></calendar>\n  </div>\n</div>'
  });
  $(function(){
    return this.app = new Vue({
      el: '#myapp'
    });
  });
}).call(this);
